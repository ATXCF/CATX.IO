ALTER TABLE status ADD `db_version` DOUBLE( 10, 2 ) NOT NULL;
ALTER TABLE status ADD `cron_daily_stats` DATETIME NOT NULL;
ALTER TABLE status ADD `cron_get_stats` DATETIME NOT NULL;
ALTER TABLE status ADD `cron_maintenance` DATETIME NOT NULL;
ALTER TABLE status ADD `cron_monthly_stats` DATETIME NOT NULL;
ALTER TABLE status ADD `cron_receive_bitcoin` DATETIME NOT NULL;
ALTER TABLE status ADD `cron_send_bitcoin` DATETIME NOT NULL;

INSERT INTO `admin_controls_methods` (`id`, `method`, `arguments`, `order`, `control_id`, `p_id`) VALUES
(2305, 'startArea', 'a:3:{s:6:"legend";s:12:"System Info.";s:5:"class";s:8:"box_left";s:6:"height";s:0:"";}', 49, 244, 0),
(2306, 'endArea', '', 57, 244, 0),
(2307, 'textInput', 'a:13:{s:4:"name";s:10:"db_version";s:7:"caption";s:16:"Database Version";s:8:"required";s:0:"";s:5:"value";s:0:"";s:2:"id";s:0:"";s:13:"db_field_type";s:7:"decimal";s:5:"class";s:0:"";s:7:"jscript";s:0:"";s:5:"style";s:0:"";s:15:"is_manual_array";s:0:"";s:9:"is_unique";s:0:"";s:12:"default_text";s:0:"";s:17:"delete_whitespace";s:0:"";}', 50, 244, 0),
(2308, 'dateWidget', 'a:19:{s:4:"name";s:16:"cron_daily_stats";s:7:"caption";s:16:"Daily Stats Last";s:8:"required";s:0:"";s:4:"time";s:1:"1";s:4:"ampm";s:0:"";s:9:"req_start";s:0:"";s:7:"req_end";s:0:"";s:5:"value";s:0:"";s:7:"link_to";s:0:"";s:2:"id";s:0:"";s:5:"class";s:0:"";s:6:"format";s:0:"";s:7:"jscript";s:0:"";s:5:"style";s:0:"";s:19:"is_filter_range_end";s:0:"";s:14:"document_ready";s:0:"";s:9:"only_time";s:0:"";s:16:"regular_interval";s:0:"";s:13:"only_interval";s:0:"";}', 51, 244, 0),
(2309, 'dateWidget', 'a:19:{s:4:"name";s:14:"cron_get_stats";s:7:"caption";s:23:"Get External Stats Last";s:8:"required";s:0:"";s:4:"time";s:1:"1";s:4:"ampm";s:0:"";s:9:"req_start";s:0:"";s:7:"req_end";s:0:"";s:5:"value";s:0:"";s:7:"link_to";s:0:"";s:2:"id";s:0:"";s:5:"class";s:0:"";s:6:"format";s:0:"";s:7:"jscript";s:0:"";s:5:"style";s:0:"";s:19:"is_filter_range_end";s:0:"";s:14:"document_ready";s:0:"";s:9:"only_time";s:0:"";s:16:"regular_interval";s:0:"";s:13:"only_interval";s:0:"";}', 52, 244, 0),
(2310, 'dateWidget', 'a:19:{s:4:"name";s:16:"cron_maintenance";s:7:"caption";s:16:"Maintenance Last";s:8:"required";s:0:"";s:4:"time";s:1:"1";s:4:"ampm";s:0:"";s:9:"req_start";s:0:"";s:7:"req_end";s:0:"";s:5:"value";s:0:"";s:7:"link_to";s:0:"";s:2:"id";s:0:"";s:5:"class";s:0:"";s:6:"format";s:0:"";s:7:"jscript";s:0:"";s:5:"style";s:0:"";s:19:"is_filter_range_end";s:0:"";s:14:"document_ready";s:0:"";s:9:"only_time";s:0:"";s:16:"regular_interval";s:0:"";s:13:"only_interval";s:0:"";}', 53, 244, 0),
(2311, 'dateWidget', 'a:19:{s:4:"name";s:18:"cron_monthly_stats";s:7:"caption";s:18:"Monthly Stats Last";s:8:"required";s:0:"";s:4:"time";s:1:"1";s:4:"ampm";s:0:"";s:9:"req_start";s:0:"";s:7:"req_end";s:0:"";s:5:"value";s:0:"";s:7:"link_to";s:0:"";s:2:"id";s:0:"";s:5:"class";s:0:"";s:6:"format";s:0:"";s:7:"jscript";s:0:"";s:5:"style";s:0:"";s:19:"is_filter_range_end";s:0:"";s:14:"document_ready";s:0:"";s:9:"only_time";s:0:"";s:16:"regular_interval";s:0:"";s:13:"only_interval";s:0:"";}', 54, 244, 0),
(2312, 'dateWidget', 'a:19:{s:4:"name";s:20:"cron_receive_bitcoin";s:7:"caption";s:20:"Receive Bitcoin Last";s:8:"required";s:0:"";s:4:"time";s:1:"1";s:4:"ampm";s:0:"";s:9:"req_start";s:0:"";s:7:"req_end";s:0:"";s:5:"value";s:0:"";s:7:"link_to";s:0:"";s:2:"id";s:0:"";s:5:"class";s:0:"";s:6:"format";s:0:"";s:7:"jscript";s:0:"";s:5:"style";s:0:"";s:19:"is_filter_range_end";s:0:"";s:14:"document_ready";s:0:"";s:9:"only_time";s:0:"";s:16:"regular_interval";s:0:"";s:13:"only_interval";s:0:"";}', 55, 244, 0),
(2313, 'dateWidget', 'a:19:{s:4:"name";s:17:"cron_send_bitcoin";s:7:"caption";s:17:"Send Bitcoin Last";s:8:"required";s:0:"";s:4:"time";s:1:"1";s:4:"ampm";s:0:"";s:9:"req_start";s:0:"";s:7:"req_end";s:0:"";s:5:"value";s:0:"";s:7:"link_to";s:0:"";s:2:"id";s:0:"";s:5:"class";s:0:"";s:6:"format";s:0:"";s:7:"jscript";s:0:"";s:5:"style";s:0:"";s:19:"is_filter_range_end";s:0:"";s:14:"document_ready";s:0:"";s:9:"only_time";s:0:"";s:16:"regular_interval";s:0:"";s:13:"only_interval";s:0:"";}', 56, 244, 0);

INSERT INTO `admin_controls_methods` (`id`, `method`, `arguments`, `order`, `control_id`, `p_id`) VALUES
(2314, 'checkBox', 'a:9:{s:4:"name";s:19:"notify_withdraw_btc";s:7:"caption";s:19:"Notify Withdraw BTC";s:8:"required";s:0:"";s:2:"id";s:0:"";s:5:"class";s:0:"";s:7:"jscript";s:0:"";s:5:"style";s:0:"";s:11:"label_class";s:0:"";s:7:"checked";s:0:"";}', 25, 130, 0),
(2315, 'checkBox', 'a:9:{s:4:"name";s:20:"notify_withdraw_bank";s:7:"caption";s:20:"Notify Withdraw Bank";s:8:"required";s:0:"";s:2:"id";s:0:"";s:5:"class";s:0:"";s:7:"jscript";s:0:"";s:5:"style";s:0:"";s:11:"label_class";s:0:"";s:7:"checked";s:0:"";}', 27, 130, 0);


INSERT INTO `lang` (`id`, `key`, `esp`, `eng`, `order`, `p_id`) VALUES
(436, 'settings-notify-withdraw-btc', 'Notificar por email cuando se retira BTC.', 'Notify by email when BTC withdrawals are made.', '', 104),
(437, 'settings-notify-withdraw-bank', 'Notificar por email cuando se retira a una cuenta bancaria.', 'Notify by email when withdrawals to bank accounts are made.', '', 104);

ALTER TABLE site_users ADD `notify_withdraw_btc` ENUM('Y','N') NOT NULL DEFAULT 'Y';
ALTER TABLE site_users ADD `notify_withdraw_bank` ENUM('Y','N') NOT NULL DEFAULT 'Y';

INSERT INTO `emails` (`id`, `key`, `title_en`, `title_es`, `content_en`, `content_es`) VALUES
(22, 'new-deposit', 'New Deposit Received ([amount] [currency])', 'Nuevo Dep√≥sito Recibido ([amount] [currency])', 0x3c703e44656172205b66697273745f6e616d655d205b6c6173745f6e616d655d2c3c2f703e0d0a0d0a3c703e596f7520686176652072656365697665642061206e6577206465706f73697420666f72205b616d6f756e745d205b63757272656e63795d2e3c2f703e0d0a0d0a3c703e546865204944206e756d626572206f6620746865206465706f736974206973205b69645d2e3c2f703e0d0a0d0a3c703e4265737420726567617264732c3c2f703e0d0a0d0a3c703e5b65786368616e67655f6e616d655d20537570706f7274205465616d3c2f703e0d0a, 0x3c703e457374696d61646f286129205b66697273745f6e616d655d205b6c6173745f6e616d655d2c3c2f703e0d0a0d0a3c703e4c65206e6f7469666963616d6f732071756520686120726563696269646f20756e206e7565766f20646570266f61637574653b7369746f206465205b616d6f756e745d205b63757272656e63795d2e3c2f703e0d0a0d0a3c703e456c20494420617369676e61646f2061206573746520646570266f61637574653b7369746f206573205b69645d2e3c2f703e0d0a0d0a3c703e4174656e7461746d656e74652c3c2f703e0d0a0d0a3c703e536f706f727465206465205b65786368616e67655f6e616d655d3c2f703e0d0a),
(23, 'new-withdrawal', 'New Withdrawal Request ([amount] [currency])', 'Nueva solicitud de retiro ([amount] [currency])', 0x3c703e44656172205b66697273745f6e616d655d205b6c6173745f6e616d655d2c3c2f703e0d0a0d0a3c703e596f75206861766520637265617465642061206e6577207769746864726177616c207265717565737420666f72205b616d6f756e745d205b63757272656e63795d2e20546865204944206e756d626572206f6620746865207769746864726177616c206973205b69645d2e3c2f703e0d0a0d0a3c703e496620796f7520646964206e6f74206e6f74206d616b652074686973207769746864726177616c2c20706c6561736520636f6e74616374206f757220737461666620696d6d6564696174656c792e3c2f703e0d0a0d0a3c703e4265737420726567617264732c3c2f703e0d0a0d0a3c703e5b65786368616e67655f6e616d655d20537570706f7274205465616d3c2f703e0d0a, 0x3c703e457374696d61646f286129205b66697273745f6e616d655d205b6c6173745f6e616d655d2c3c2f703e0d0a0d0a3c703e4c65206e6f7469666963616d6f7320646520756e61206e7565766120736f6c6963697475642072657469726f206465205b616d6f756e745d205b63757272656e63795d2e3c2f703e0d0a0d0a3c703e456c20494420617369676e61646f206120657374652072657469726f206573205b69645d2e3c2f703e0d0a0d0a3c703e5369207573746564206e6f20656665637475266f61637574653b20657374652072657469726f2c20706f72206661766f7220636f6e74616374652061206e75657374726f20706572736f6e616c20696e6d6564696174616d656e74652e3c2f703e0d0a0d0a3c703e4174656e7461746d656e74652c3c2f703e0d0a0d0a3c703e536f706f727465206465205b65786368616e67655f6e616d655d3c2f703e0d0a);

DELETE FROM `admin_controls_methods` WHERE `admin_controls_methods`.`id` = 2152;
DELETE FROM `admin_controls_methods` WHERE `admin_controls_methods`.`id` = 2153;
DELETE FROM `admin_controls_methods` WHERE `admin_controls_methods`.`id` = 2159;
DELETE FROM `admin_controls_methods` WHERE `admin_controls_methods`.`id` = 2160;
DELETE FROM `admin_controls_methods` WHERE `admin_controls_methods`.`id` = 2161;
DELETE FROM `admin_controls_methods` WHERE `admin_controls_methods`.`id` = 2164;
DELETE FROM `admin_controls_methods` WHERE `admin_controls_methods`.`id` = 2165;
DELETE FROM `admin_controls_methods` WHERE `admin_controls_methods`.`id` = 2166;
DELETE FROM `admin_controls_methods` WHERE `admin_controls_methods`.`id` = 2170;
DELETE FROM `admin_controls_methods` WHERE `admin_controls_methods`.`id` = 2168;
DELETE FROM `admin_controls_methods` WHERE `admin_controls_methods`.`id` = 2169;

ALTER TABLE history ADD `balance_before` DOUBLE( 16, 8 ) NOT NULL;
ALTER TABLE history ADD `balance_after` DOUBLE( 16, 8 ) NOT NULL;

UPDATE `admin_controls` SET `id` = 215,`page_id` = 0,`tab_id` = 62,`action` = '',`class` = 'Grid',`arguments` = 'a:24:{s:5:"table";s:6:"orders";s:4:"mode";s:0:"";s:13:"rows_per_page";s:0:"";s:5:"class";s:0:"";s:12:"show_buttons";s:1:"Y";s:14:"target_elem_id";s:8:"edit_box";s:9:"max_pages";s:0:"";s:16:"pagination_label";s:0:"";s:18:"show_list_captions";s:0:"";s:8:"order_by";s:4:"date";s:9:"order_asc";s:0:"";s:10:"save_order";s:0:"";s:12:"enable_graph";s:0:"";s:12:"enable_table";s:0:"";s:11:"enable_list";s:0:"";s:17:"enable_graph_line";s:0:"";s:16:"enable_graph_pie";s:0:"";s:15:"button_link_url";s:0:"";s:18:"button_link_is_tab";s:0:"";s:10:"sql_filter";s:0:"";s:16:"alert_condition1";s:0:"";s:16:"alert_condition2";s:0:"";s:8:"group_by";s:0:"";s:11:"no_group_by";s:0:"";}',`order` = 0,`is_static` = 'N' WHERE `admin_controls`.`id` = 215;
UPDATE `admin_controls` SET `id` = 218,`page_id` = 75,`tab_id` = 0,`action` = '',`class` = 'Grid',`arguments` = 'a:24:{s:5:"table";s:12:"transactions";s:4:"mode";s:0:"";s:13:"rows_per_page";s:0:"";s:5:"class";s:0:"";s:12:"show_buttons";s:1:"Y";s:14:"target_elem_id";s:7:"content";s:9:"max_pages";s:0:"";s:16:"pagination_label";s:0:"";s:18:"show_list_captions";s:0:"";s:8:"order_by";s:4:"date";s:9:"order_asc";s:0:"";s:10:"save_order";s:0:"";s:12:"enable_graph";s:0:"";s:12:"enable_table";s:0:"";s:11:"enable_list";s:0:"";s:17:"enable_graph_line";s:0:"";s:16:"enable_graph_pie";s:0:"";s:15:"button_link_url";s:0:"";s:18:"button_link_is_tab";s:0:"";s:10:"sql_filter";s:0:"";s:16:"alert_condition1";s:0:"";s:16:"alert_condition2";s:0:"";s:8:"group_by";s:0:"";s:11:"no_group_by";s:0:"";}',`order` = 0,`is_static` = 'N' WHERE `admin_controls`.`id` = 218;
UPDATE `admin_controls` SET `id` = 233,`page_id` = 0,`tab_id` = 63,`action` = '',`class` = 'Grid',`arguments` = 'a:24:{s:5:"table";s:8:"requests";s:4:"mode";s:0:"";s:13:"rows_per_page";s:0:"";s:5:"class";s:0:"";s:12:"show_buttons";s:1:"Y";s:14:"target_elem_id";s:8:"edit_box";s:9:"max_pages";s:0:"";s:16:"pagination_label";s:0:"";s:18:"show_list_captions";s:0:"";s:8:"order_by";s:4:"date";s:9:"order_asc";s:0:"";s:10:"save_order";s:0:"";s:12:"enable_graph";s:0:"";s:12:"enable_table";s:0:"";s:11:"enable_list";s:0:"";s:17:"enable_graph_line";s:0:"";s:16:"enable_graph_pie";s:0:"";s:15:"button_link_url";s:0:"";s:18:"button_link_is_tab";s:0:"";s:10:"sql_filter";s:0:"";s:16:"alert_condition1";s:111:"''[request_status]'' == ''Pending'' && ''[currency]'' != ''BTC'' && ''[request_type]'' == ''Withdrawal'' && ''[done]'' != ''Y''";s:16:"alert_condition2";s:26:"strlen(''[site_user]'') <= 1";s:8:"group_by";s:0:"";s:11:"no_group_by";s:0:"";}',`order` = 0,`is_static` = 'N' WHERE `admin_controls`.`id` = 233;
UPDATE `admin_controls` SET `id` = 236,`page_id` = 80,`tab_id` = 0,`action` = '',`class` = 'Grid',`arguments` = 'a:24:{s:5:"table";s:4:"news";s:4:"mode";s:0:"";s:13:"rows_per_page";s:0:"";s:5:"class";s:0:"";s:12:"show_buttons";s:1:"Y";s:14:"target_elem_id";s:7:"content";s:9:"max_pages";s:0:"";s:16:"pagination_label";s:0:"";s:18:"show_list_captions";s:0:"";s:8:"order_by";s:4:"date";s:9:"order_asc";s:0:"";s:10:"save_order";s:0:"";s:12:"enable_graph";s:0:"";s:12:"enable_table";s:0:"";s:11:"enable_list";s:0:"";s:17:"enable_graph_line";s:0:"";s:16:"enable_graph_pie";s:0:"";s:15:"button_link_url";s:0:"";s:18:"button_link_is_tab";s:0:"";s:10:"sql_filter";s:0:"";s:16:"alert_condition1";s:0:"";s:16:"alert_condition2";s:0:"";s:8:"group_by";s:0:"";s:11:"no_group_by";s:0:"";}',`order` = 0,`is_static` = 'N' WHERE `admin_controls`.`id` = 236;
UPDATE `admin_controls` SET `id` = 247,`page_id` = 85,`tab_id` = 0,`action` = '',`class` = 'Grid',`arguments` = 'a:24:{s:5:"table";s:4:"fees";s:4:"mode";s:0:"";s:13:"rows_per_page";s:0:"";s:5:"class";s:0:"";s:14:"target_elem_id";s:8:"edit_box";s:9:"max_pages";s:0:"";s:16:"pagination_label";s:0:"";s:18:"show_list_captions";s:0:"";s:8:"order_by";s:4:"date";s:9:"order_asc";s:0:"";s:10:"save_order";s:0:"";s:12:"enable_graph";s:0:"";s:12:"enable_table";s:0:"";s:11:"enable_list";s:0:"";s:17:"enable_graph_line";s:0:"";s:16:"enable_graph_pie";s:0:"";s:15:"button_link_url";s:0:"";s:18:"button_link_is_tab";s:0:"";s:10:"sql_filter";s:0:"";s:16:"alert_condition1";s:0:"";s:16:"alert_condition2";s:0:"";s:8:"group_by";s:0:"";s:11:"no_group_by";s:0:"";s:12:"show_buttons";s:0:"";}',`order` = 0,`is_static` = 'N' WHERE `admin_controls`.`id` = 247;
UPDATE `admin_controls` SET `id` = 249,`page_id` = 86,`tab_id` = 0,`action` = '',`class` = 'Grid',`arguments` = 'a:24:{s:5:"table";s:13:"daily_reports";s:4:"mode";s:0:"";s:13:"rows_per_page";s:0:"";s:5:"class";s:0:"";s:14:"target_elem_id";s:8:"edit_box";s:9:"max_pages";s:0:"";s:16:"pagination_label";s:0:"";s:18:"show_list_captions";s:0:"";s:8:"order_by";s:4:"date";s:9:"order_asc";s:0:"";s:10:"save_order";s:0:"";s:12:"enable_graph";s:0:"";s:12:"enable_table";s:1:"1";s:11:"enable_list";s:0:"";s:17:"enable_graph_line";s:1:"1";s:16:"enable_graph_pie";s:0:"";s:15:"button_link_url";s:0:"";s:18:"button_link_is_tab";s:0:"";s:10:"sql_filter";s:0:"";s:16:"alert_condition1";s:0:"";s:16:"alert_condition2";s:0:"";s:8:"group_by";s:0:"";s:11:"no_group_by";s:0:"";s:12:"show_buttons";s:0:"";}',`order` = 0,`is_static` = 'N' WHERE `admin_controls`.`id` = 249;
UPDATE `admin_controls` SET `id` = 251,`page_id` = 87,`tab_id` = 0,`action` = '',`class` = 'Grid',`arguments` = 'a:24:{s:5:"table";s:15:"monthly_reports";s:4:"mode";s:0:"";s:13:"rows_per_page";s:0:"";s:5:"class";s:0:"";s:14:"target_elem_id";s:8:"edit_box";s:9:"max_pages";s:0:"";s:16:"pagination_label";s:0:"";s:18:"show_list_captions";s:0:"";s:8:"order_by";s:4:"date";s:9:"order_asc";s:0:"";s:10:"save_order";s:0:"";s:12:"enable_graph";s:0:"";s:12:"enable_table";s:1:"1";s:11:"enable_list";s:0:"";s:17:"enable_graph_line";s:1:"1";s:16:"enable_graph_pie";s:0:"";s:15:"button_link_url";s:0:"";s:18:"button_link_is_tab";s:0:"";s:10:"sql_filter";s:0:"";s:16:"alert_condition1";s:0:"";s:16:"alert_condition2";s:0:"";s:8:"group_by";s:0:"";s:11:"no_group_by";s:0:"";s:12:"show_buttons";s:0:"";}',`order` = 0,`is_static` = 'N' WHERE `admin_controls`.`id` = 251;
UPDATE `admin_controls` SET `id` = 254,`page_id` = 88,`tab_id` = 0,`action` = '',`class` = 'Grid',`arguments` = 'a:24:{s:5:"table";s:9:"order_log";s:4:"mode";s:0:"";s:13:"rows_per_page";s:0:"";s:5:"class";s:0:"";s:12:"show_buttons";s:1:"Y";s:14:"target_elem_id";s:8:"edit_box";s:9:"max_pages";s:0:"";s:16:"pagination_label";s:0:"";s:18:"show_list_captions";s:0:"";s:8:"order_by";s:4:"date";s:9:"order_asc";s:0:"";s:10:"save_order";s:0:"";s:12:"enable_graph";s:0:"";s:12:"enable_table";s:0:"";s:11:"enable_list";s:0:"";s:17:"enable_graph_line";s:0:"";s:16:"enable_graph_pie";s:0:"";s:15:"button_link_url";s:0:"";s:18:"button_link_is_tab";s:0:"";s:10:"sql_filter";s:0:"";s:16:"alert_condition1";s:0:"";s:16:"alert_condition2";s:0:"";s:8:"group_by";s:0:"";s:11:"no_group_by";s:0:"";}',`order` = 0,`is_static` = 'N' WHERE `admin_controls`.`id` = 254;
UPDATE `admin_controls` SET `id` = 263,`page_id` = 91,`tab_id` = 0,`action` = '',`class` = 'Grid',`arguments` = 'a:24:{s:5:"table";s:7:"history";s:4:"mode";s:0:"";s:13:"rows_per_page";s:0:"";s:5:"class";s:0:"";s:12:"show_buttons";s:1:"Y";s:14:"target_elem_id";s:8:"edit_box";s:9:"max_pages";s:0:"";s:16:"pagination_label";s:0:"";s:18:"show_list_captions";s:0:"";s:8:"order_by";s:4:"date";s:9:"order_asc";s:0:"";s:10:"save_order";s:0:"";s:12:"enable_graph";s:0:"";s:12:"enable_table";s:0:"";s:11:"enable_list";s:0:"";s:17:"enable_graph_line";s:0:"";s:16:"enable_graph_pie";s:0:"";s:15:"button_link_url";s:0:"";s:18:"button_link_is_tab";s:0:"";s:10:"sql_filter";s:0:"";s:16:"alert_condition1";s:0:"";s:16:"alert_condition2";s:0:"";s:8:"group_by";s:0:"";s:11:"no_group_by";s:0:"";}',`order` = 0,`is_static` = 'N' WHERE `admin_controls`.`id` = 263;



UPDATE`status` SET `db_version` = '1' WHERE `status`.`id` =1;
